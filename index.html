<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gestão Financeira Pessoal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png">
    <meta name="theme-color" content="#3b5b70">
    <link rel="icon" type="image/png" href="/assets/icons/icon-192.png">
    <!-- Chart.js via CDN -->
     <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
     <!-- Supabase env and client (safe-load) -->
  <meta name="ENV_SUPABASE_URL" content="">
  <meta name="ENV_SUPABASE_ANON_KEY" content="">
  <!-- Habilite leitura de .env localmente: defina como true -->
    <meta name="ENV_USE_DOTENV" content="false">
    <script src="assets/js/env.local.js"></script>
    <script src="assets/js/env.js"></script>
     <script type="module" src="assets/js/core/supabaseClient.js"></script>
  </head>
  <body>
    <div class="layout">
      <aside class="sidebar">
        <div class="logo">FinançasPro</div>
        <nav class="nav">
          <a href="#/dashboard" data-route="dashboard" class="nav-link active">
            <span class="nav-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 10l9-7 9 7"></path>
                <path d="M4 10v10h6v-6h4v6h6V10"></path>
              </svg>
            </span>
            Dashboard
          </a>
          <a href="#/transactions" data-route="transactions" class="nav-link">
            <span class="nav-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="6" width="18" height="12" rx="2"></rect>
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M7 12h0"></path>
                <path d="M17 12h0"></path>
              </svg>
            </span>
            Transações
          </a>
          <a href="#/categories" data-route="categories" class="nav-link">
            <span class="nav-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="8" y1="6" x2="21" y2="6"></line>
                <line x1="8" y1="12" x2="21" y2="12"></line>
                <line x1="8" y1="18" x2="21" y2="18"></line>
                <circle cx="4" cy="6" r="1.5"></circle>
                <circle cx="4" cy="12" r="1.5"></circle>
                <circle cx="4" cy="18" r="1.5"></circle>
              </svg>
            </span>
            Categorias
          </a>
          <a href="#/banks" data-route="banks" class="nav-link">
            <span class="nav-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 4l9 4H3l9-4z"></path>
                <path d="M4 10h16"></path>
                <path d="M5 10v8"></path>
                <path d="M9 10v8"></path>
                <path d="M13 10v8"></path>
                <path d="M17 10v8"></path>
                <path d="M3 18h18"></path>
              </svg>
            </span>
            Bancos
          </a>
          <a href="#/goals" data-route="goals" class="nav-link">
            <span class="nav-icon" aria-hidden="true">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="9"></circle>
                <circle cx="12" cy="12" r="5"></circle>
                <circle cx="12" cy="12" r="2"></circle>
                <path d="M22 2l-6 6"></path>
              </svg>
            </span>
            Metas
          </a>
        </nav>
        <div class="menu-footer">
          <div id="user-info" class="user-info" hidden>
            <div class="user-card">
              <div class="user-left">
                <div class="avatar" aria-hidden="true">
                  <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="8" r="4"></circle>
                    <path d="M6 20a6 6 0 0 1 12 0"></path>
                  </svg>
                </div>
              </div>
              <div class="user-center">
                <p id="user-name" class="user-name">Usuário</p>
                <p id="user-email" class="user-email muted">email@exemplo.com</p>
              </div>
              <div class="user-right">
                <button id="btn-logout" class="logout-btn" aria-label="Sair" title="Sair">
                  <img src="./assets/icons/logout.svg" alt="Sair" width="20" height="20" />
                </button>
              </div>
            </div>
          </div>
          <div id="guest-info" class="user-info" hidden>
            <span class="muted">Você não está logado</span>
          </div>
        </div>
      </aside>

      <div class="content">
        <header class="header">
          <div class="header-inner" style="display:grid; grid-template-columns: auto 1fr auto; align-items:center; position:relative; width:100%;">
            <div class="header-left" style="justify-self:start;">
              <div class="header-controls">
                <button id="btn-menu" class="btn-menu" aria-label="Menu">☰</button>
              </div>
            </div>
            <div class="header-title" style="justify-self:center;">
              <h1 id="page-title">Dashboard</h1>
            </div>
            <div class="header-right" style="justify-self:end; position:relative;">
              <button id="btn-month-filter" class="icon-button" title="Filtrar mês" aria-label="Filtrar mês">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M3 5h18l-7 8v6l-4-2v-4L3 5z" fill="currentColor" />
                </svg>
              </button>
              <div id="month-filter-popover" class="popover" hidden style="position:absolute; right:0; top:48px; background:#fff; border:1px solid #ddd; border-radius:8px; padding:12px; box-shadow:0 6px 20px rgba(0,0,0,0.12);">
                <label for="month-filter-input" style="font-size:12px;color:#666;">Mês/Ano</label>
                <input id="month-filter-input" type="month" style="margin-top:4px;" />
                <p style="font-size:11px;color:#888;margin-top:8px;max-width:220px;">Ao alterar o mês, o dashboard, transações e meta serão filtrados.</p>
              </div>
            </div>
          </div>
        </header>

        <main class="page-container">
          <section id="page-auth" class="page hidden">
            <div class="auth-wrapper">
              <div class="auth-hero">
                <div class="auth-hero-inner">
                  <div class="brand">FinançasPro</div>
                  <div class="subtitle">Organize suas finanças com clareza e praticidade.</div>
                </div>
              </div>
              <div class="auth-panel">
                <div class="auth-card">
                  <div class="card auth-ui">
                    <div class="auth-card-header">
                      <div class="auth-lock-circle" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                          <rect x="5" y="11" width="14" height="10" rx="2"></rect>
                          <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                      </div>
                      <h2 class="card-title">Bem-vindo</h2>
                      <p class="card-desc">Entre na sua conta ou crie uma nova para continuar</p>
                    </div>

                    <div class="auth-tabs">
                      <div class="tabs-list">
                        <button type="button" class="tabs-trigger active" data-tab="login" aria-controls="form-login">
                          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <path d="M10 17l5-5-5-5"></path>
                            <path d="M4 12h11"></path>
                          </svg>
                          Entrar
                        </button>
                        <button type="button" class="tabs-trigger" data-tab="register" aria-controls="form-register">
                          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                            <circle cx="12" cy="8" r="4"></circle>
                            <path d="M6 20a6 6 0 0 1 12 0"></path>
                            <path d="M19 8h4"></path>
                            <path d="M21 6v4"></path>
                          </svg>
                          Cadastrar
                        </button>
                      </div>

                      <div class="tabs-content" data-tab="login">
                        <form id="form-login" class="form-grid small">
                          <div class="form-group">
                            <label for="login-email">Email</label>
                            <div class="input-with-icon">
                              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <rect x="3" y="5" width="18" height="14" rx="2"></rect>
                                <path d="M3 7l9 6 9-6"></path>
                              </svg>
                              <input id="login-email" name="email" type="email" required class="with-icon" />
                            </div>
                          </div>
                          <div class="form-group">
                            <label for="login-password">Senha</label>
                            <div class="input-with-icon">
                              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <rect x="5" y="11" width="14" height="10" rx="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                              </svg>
                              <input id="login-password" name="password" type="password" required class="with-icon" />
                            </div>
                          </div>
                          <div class="form-group form-actions">
                            <button type="submit" class="btn btn-primary">Entrar</button>
                            <button type="button" id="auth-toggle-register" class="btn btn-link">Criar conta</button>
                          </div>

                        </form>
                      </div>

                      <div class="tabs-content" data-tab="register" hidden>
                        <form id="form-register" class="form-grid small">
                          <div class="form-group">
                            <label for="reg-name">Nome</label>
                            <div class="input-with-icon">
                              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <circle cx="12" cy="8" r="4"></circle>
                                <path d="M6 20a6 6 0 0 1 12 0"></path>
                              </svg>
                              <input id="reg-name" name="name" type="text" required class="with-icon" />
                            </div>
                          </div>
                          <div class="form-group">
                            <label for="reg-email">Email</label>
                            <div class="input-with-icon">
                              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <rect x="3" y="5" width="18" height="14" rx="2"></rect>
                                <path d="M3 7l9 6 9-6"></path>
                              </svg>
                              <input id="reg-email" name="email" type="email" required class="with-icon" />
                            </div>
                          </div>
                          <div class="form-group">
                            <label for="reg-password">Senha</label>
                            <div class="input-with-icon">
                              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                <rect x="5" y="11" width="14" height="10" rx="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                              </svg>
                              <input id="reg-password" name="password" type="password" required class="with-icon" />
                            </div>
                          </div>
                          <div class="form-group form-actions">
                            <button type="submit" class="btn btn-primary">Cadastrar</button>
                            <button type="button" id="auth-toggle-login" class="btn btn-link">Já tenho conta</button>
                          </div>
                        </form>
                      </div>
                    </div>

                    <div id="auth-message" class="form-message" aria-live="polite"></div>
                  </div>
                </div>
              </div>
            </div>
          </section>
          <!-- Dashboard -->
          <section id="page-dashboard" class="page">
            <div class="card shadow-sm goal-card">
              <div class="card-header">
                <h2 class="card-title">
                  <span class="icon-target" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="12" r="9"></circle>
                      <circle cx="12" cy="12" r="5"></circle>
                      <circle cx="12" cy="12" r="2"></circle>
                      <path d="M22 2l-6 6"></path>
                    </svg>
                  </span>
                  Meta Mensal de Gastos
                </h2>
              </div>
              <div class="card-content">
                <div class="goal-stats-cards">
                  <div class="stat-card shadow-sm">
                    <div class="card-info">
                      <button type="button" class="info-icon" aria-label="Mais informações sobre gasto" aria-controls="spent-info-tip" aria-expanded="false">
                        <img src="./assets/icons/info.svg" alt="" aria-hidden="true" />
                      </button>
                      <span id="spent-info-tip" class="tooltip" role="tooltip">O total de gastos do mês selecionado.</span>
                    </div>
                    <div class="stat-label-row">
                      <p class="muted">Gastos</p>
                    </div>
                    <p id="goal-spent-large" class="stat-value">R$ 0,00</p>
                  </div>
                  <div class="stat-card shadow-sm">
                    <div class="card-info">
                      <button type="button" class="info-icon" aria-label="Mais informações sobre meta" aria-controls="goal-info-tip" aria-expanded="false">
                        <img src="./assets/icons/info.svg" alt="" aria-hidden="true" />
                      </button>
                      <span id="goal-info-tip" class="tooltip" role="tooltip">Meta definida de máximo de gastos para o mês selecionado.</span>
                    </div>
                    <div class="stat-label-row">
                      <p class="muted">Meta</p>
                    </div>
                    <p id="goal-meta-large" class="stat-value">R$ 0,00</p>
                  </div>
                </div>
                <div class="progress">
                  <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill" style="width:0%"></div>
                  </div>
                  <div class="progress-text">
                    <span id="progress-percent">Progresso: 0%</span>
                    <span id="goal-remaining-text" class="muted">Restante: R$ 0,00</span>
                    <span id="progress-warning" class="warning" hidden></span>
                    <span id="progress-spent" hidden>Gasto: R$ 0,00</span>
                    <span id="progress-goal" hidden>Meta: R$ 0,00</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="dashboard-grid-charts">
              <div class="card shadow-sm">
                <h2 class="card-title">
                  <span class="icon-list" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <line x1="8" y1="6" x2="21" y2="6"></line>
                      <line x1="8" y1="12" x2="21" y2="12"></line>
                      <line x1="8" y1="18" x2="21" y2="18"></line>
                      <circle cx="4" cy="6" r="1.5"></circle>
                      <circle cx="4" cy="12" r="1.5"></circle>
                      <circle cx="4" cy="18" r="1.5"></circle>
                    </svg>
                  </span>
                  Despesas por Categoria
                </h2>
                <div class="chart-square">
                  <canvas id="pie-expenses-by-category"></canvas>
                </div>
                <div id="pie-info" class="chart-info"></div>
              </div>
              <div class="card shadow-sm">
                <h2 class="card-title">
                  <span class="icon-bank" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M12 4l9 4H3l9-4z"></path>
                      <path d="M4 10h16"></path>
                      <path d="M5 10v8"></path>
                      <path d="M9 10v8"></path>
                      <path d="M13 10v8"></path>
                      <path d="M17 10v8"></path>
                      <path d="M3 18h18"></path>
                    </svg>
                  </span>
                  Despesas por Banco
                </h2>
                <div class="chart-square">
                  <canvas id="pie-expenses-by-bank"></canvas>
                </div>
                <div id="pie-info-banks" class="chart-info"></div>
              </div>
              <div class="card shadow-sm chart-card-income-expense">
                <h2 class="card-title">
                  <span class="icon-chart" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <rect x="4" y="10" width="4" height="8"></rect>
                      <rect x="10" y="6" width="4" height="12"></rect>
                      <rect x="16" y="12" width="4" height="6"></rect>
                    </svg>
                  </span>
                  Gastos vs Meta (Últimos 6 meses)
                </h2>
                <div class="chart-wide">
                  <canvas id="bar-income-vs-expense"></canvas>
                </div>
              </div>
            </div>
          </section>

          <!-- Transações -->
          <section id="page-transactions" class="page hidden">
            <div class="card">
              <h2 class="card-title">
                <span class="icon-money" aria-hidden="true">
                  <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="6" width="18" height="12" rx="2"></rect>
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M7 12h0"></path>
                    <path d="M17 12h0"></path>
                  </svg>
                </span>
                Nova Transação
              </h2>
              <form id="form-transaction" class="form-grid">
                <div class="form-group">
                  <label for="tx-description">Descrição</label>
                  <input id="tx-description" name="description" type="text" required />
                </div>
                <div class="form-group">
                  <label for="tx-amount">Valor (R$)</label>
                  <input id="tx-amount" name="amount" type="number" min="0.01" step="0.01" required />
                </div>
                <div class="form-group">
                  <label for="tx-date">Data</label>
                  <input id="tx-date" name="date" type="date" lang="pt-BR" required />
                </div>
                <div class="form-group">
                  <label for="tx-type">Tipo</label>
                  <select id="tx-type" name="type" required>
                    <option value="expense">Despesa</option>
                    <option value="income">Receita</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="tx-category">Categoria</label>
                  <select id="tx-category" name="categoryId" required></select>
                </div>
                <div class="form-group" id="tx-bank-group">
                  <label for="tx-bank">Banco</label>
                  <select id="tx-bank" name="bankId"></select>
                </div>
                <div class="form-group form-actions">
                  <button type="submit" class="btn btn-primary">Adicionar</button>
                </div>
              </form>
              <div id="transactions-feedback" class="feedback" hidden></div>
            </div>

            <div class="card">
              <h2 class="card-title">
                <span class="icon-money" aria-hidden="true">
                  <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="6" width="18" height="12" rx="2"></rect>
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M7 12h0"></path>
                    <path d="M17 12h0"></path>
                  </svg>
                </span>
                Transações do Mês Selecionado
              </h2>
              <div id="list-transactions" class="transactions-list"></div>
            </div>
          </section>

          <!-- Categorias -->
          <section id="page-categories" class="page hidden">
            <div class="page-grid">
              <div class="card shadow-sm">
                <h2 class="card-title">
                  <span class="icon-list" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <line x1="8" y1="6" x2="21" y2="6"></line>
                      <line x1="8" y1="12" x2="21" y2="12"></line>
                      <line x1="8" y1="18" x2="21" y2="18"></line>
                      <circle cx="4" cy="6" r="1.5"></circle>
                      <circle cx="4" cy="12" r="1.5"></circle>
                      <circle cx="4" cy="18" r="1.5"></circle>
                    </svg>
                  </span>
                  Nova Categoria
                </h2>
                <form id="form-category" class="form-grid small">
                  <div class="form-group">
                    <label for="cat-name">Nome</label>
                    <input id="cat-name" name="name" type="text" required />
                  </div>
                  <div class="form-group">
                    <label id="label-cat-color" for="btn-open-color">Cor</label>
                     <div class="color-picker-row">
                       <input id="cat-color" name="color" type="hidden" value="#6200ee" />
                       <button type="button" id="btn-open-color" class="color-trigger" aria-haspopup="dialog" aria-expanded="false">
                         <span id="color-dot" class="color-dot" aria-label="Cor selecionada" style="background-color:#6200ee"></span>
                       </button>
                       <div id="color-overlay" class="color-overlay" hidden></div>
                       <div id="cat-color-popup" class="color-popup center" role="dialog" aria-modal="true" aria-labelledby="label-cat-color" hidden>
                         <h3 class="card-title popup-title">Selecione uma cor</h3>
                         <div id="color-announce" class="sr-only" aria-live="polite"></div>
                         <div class="color-options" role="listbox" aria-label="Histórico de cores"></div>
                         <div class="color-custom">
                           <label for="cat-color-custom">Cor personalizada: </label>
                           <input type="color" id="cat-color-custom" value="#6200ee" aria-label="Cor personalizada" />
                         </div>
                         <button type="button" id="btn-color-apply" class="btn btn-primary">Confirmar</button>
                       </div>
                     </div>
                  </div>
                  <div class="form-group form-actions">
                    <button type="submit" class="btn btn-primary">Adicionar</button>
                  </div>
                </form>
              </div>

              <div class="card shadow-sm categories-card">
                <h2 class="card-title">
                  <span class="icon-list" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <line x1="8" y1="6" x2="21" y2="6"></line>
                      <line x1="8" y1="12" x2="21" y2="12"></line>
                      <line x1="8" y1="18" x2="21" y2="18"></line>
                      <circle cx="4" cy="6" r="1.5"></circle>
                      <circle cx="4" cy="12" r="1.5"></circle>
                      <circle cx="4" cy="18" r="1.5"></circle>
                    </svg>
                  </span>
                  Categorias
                  <span id="categories-count" class="count-badge" aria-label="Total de categorias"></span>
                </h2>
                <div id="categories-feedback" class="feedback" hidden></div>
                <div id="grid-categories" class="grid-categories"></div>
              </div>
            </div>
          </section>

          <!-- Metas -->
          <section id="page-goals" class="page hidden">
            <div class="card">
              <h2 class="card-title">
                <span class="icon-target" aria-hidden="true">
                  <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="9"></circle>
                    <circle cx="12" cy="12" r="5"></circle>
                    <circle cx="12" cy="12" r="2"></circle>
                    <path d="M22 2l-6 6"></path>
                  </svg>
                </span>
                Meta Mensal de Gastos
              </h2>
              <form id="form-monthly-goal" class="form-grid small">
                <div class="form-group">
                  <label for="goal-amount">Valor da Meta (R$)</label>
                  <input id="goal-amount" name="amount" type="number" min="0.01" step="0.01" required />
                </div>
                <div class="form-group form-actions">
                  <button type="submit" class="btn btn-primary">Atualizar</button>
                </div>
              </form>
              <div id="goals-feedback" class="feedback" hidden></div>
            </div>

          </section>
          <!-- Bancos -->
          <section id="page-banks" class="page">
            <div class="page-grid">
              <div class="card shadow-sm">
                <h2 class="card-title">
                  <span class="icon-bank" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M12 4l9 4H3l9-4z"></path>
                      <path d="M4 10h16"></path>
                      <path d="M5 10v8"></path>
                      <path d="M9 10v8"></path>
                      <path d="M13 10v8"></path>
                      <path d="M17 10v8"></path>
                      <path d="M3 18h18"></path>
                    </svg>
                  </span>
                  Novo Banco
                </h2>
                <form id="form-bank" class="form-grid">
                  <input type="text" id="bank-name" placeholder="Nome do banco" required />
                  <button type="submit" class="btn btn-primary">Adicionar</button>
                </form>
              </div>
            
              <div class="card shadow-sm banks-card">
                <h2 class="card-title">
                  <span class="icon-bank" aria-hidden="true">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M12 4l9 4H3l9-4z"></path>
                      <path d="M4 10h16"></path>
                      <path d="M5 10v8"></path>
                      <path d="M9 10v8"></path>
                      <path d="M13 10v8"></path>
                      <path d="M17 10v8"></path>
                      <path d="M3 18h18"></path>
                    </svg>
                  </span>
                  Bancos
                  <span id="banks-count" class="count-badge" aria-label="Total de bancos"></span>
                </h2>
                <div id="banks-feedback" class="feedback" hidden></div>
                <div id="grid-banks" class="grid-banks"></div>
              </div>
            </div>
          </section>

        </main>
      </div>
    </div>

    <!-- FAB (Ações rápidas) -->
    <div class="fab-container" aria-label="Ações rápidas">
      <button class="fab-main" aria-label="Abrir ações">+</button>

    </div>

    <div id="drawer-overlay" class="drawer-overlay"></div>
    <script type="module" src="assets/js/services/authService.js"></script>
    <script type="module" src="assets/js/services/bootstrapServices.js"></script>
    <script src="assets/js/app.js"></script>
    <script type="module" src="assets/js/main.js"></script>
    <script src="assets/js/services/goalsService.js"></script>
     <script>
      // Em localhost: desregistrar SW para evitar cache antigo interferindo
      if ('serviceWorker' in navigator && location.hostname === 'localhost') {
        navigator.serviceWorker.getRegistrations().then(rs => {
          rs.forEach(r => r.unregister());
        }).catch(() => {});
      }
      // Fora de localhost: registrar SW normalmente
      if ('serviceWorker' in navigator && location.hostname !== 'localhost') {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/service-worker.js').catch(() => {});
        });
      }
    </script>
    <div class="drawer-overlay"></div>
  </body>
</html>